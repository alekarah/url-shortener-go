# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

–î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ **Render.com** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Web Service + Redis) + **Neon.tech** (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π PostgreSQL).

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ

- –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Render.com](https://render.com) (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub)
- –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Neon.tech](https://neon.tech) (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub)
- –ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—à–µ–Ω –≤ GitHub

---

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ PostgreSQL –Ω–∞ Neon.tech

### 1.1 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –û—Ç–∫—Ä–æ–π [neon.tech](https://neon.tech)
2. –í–æ–π–¥–∏ —á–µ—Ä–µ–∑ GitHub (Sign in with GitHub)
3. –ù–∞–∂–º–∏ **"Create a project"**
4. –í—ã–±–µ—Ä–∏ —Ä–µ–≥–∏–æ–Ω (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é **AWS US East (N. Virginia)** - –±–ª–∏–∂–µ –∫ Render Oregon)
5. –î–∞–π –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç—É: `url-shortener`
6. –í–µ—Ä—Å–∏—è PostgreSQL: **16** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
7. –ù–∞–∂–º–∏ **"Create project"**

### 1.2 –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —É–≤–∏–¥–∏—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å Connection String:

```
postgresql://username:password@ep-xxx-xxx-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require
```

**–°–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ:**
- `POSTGRES_HOST`: `ep-xxx-xxx-xxx.us-east-2.aws.neon.tech`
- `POSTGRES_PORT`: `5432`
- `POSTGRES_USER`: `username` (–∏–∑ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- `POSTGRES_PASSWORD`: `password` (–∏–∑ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- `POSTGRES_DB`: `neondb` (–∏–ª–∏ –¥—Ä—É–≥–æ–µ –∏–º—è –ë–î)
- `POSTGRES_SSLMODE`: `require`

### 1.3 –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

**–í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ (–ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º)**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ golang-migrate (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
go install -tags 'postgres' github.com/golang-migrate/migrate/v4/cmd/migrate@latest

# –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Neon)
migrate -path ./migrations -database "postgresql://username:password@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require" up
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Neon SQL Editor**

1. –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç –≤ Neon ‚Üí **SQL Editor**
2. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `migrations/000001_init_schema.up.sql`
3. –í—ã–ø–æ–ª–Ω–∏ SQL –∑–∞–ø—Ä–æ—Å

---

## –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ Render.com

### 2.1 –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. –û—Ç–∫—Ä–æ–π [render.com](https://render.com)
2. –í–æ–π–¥–∏ —á–µ—Ä–µ–∑ GitHub (Sign in with GitHub)
3. –ù–∞–∂–º–∏ **"New +"** ‚Üí **"Blueprint"**
4. –ü–æ–¥–∫–ª—é—á–∏ —Å–≤–æ–π GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–æ–µ–∫—Ç–æ–º
5. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç —Ñ–∞–π–ª `render.yaml` –∏ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

### 2.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–µ–π–¥–∏ –≤ **Web Service** ‚Üí **Environment**:

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è PostgreSQL (Neon.tech):**
```
POSTGRES_HOST=ep-xxx-xxx-xxx.us-east-2.aws.neon.tech
POSTGRES_PORT=5432
POSTGRES_USER=—Ç–≤–æ–π_username
POSTGRES_PASSWORD=—Ç–≤–æ–π_password
POSTGRES_DB=neondb
POSTGRES_SSLMODE=require
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è BASE_URL:**
```
BASE_URL=https://—Ç–≤–æ–π-—Å–µ—Ä–≤–∏—Å.onrender.com
```
*(–ó–∞–º–µ–Ω–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL)*

### 2.3 –î–µ–ø–ª–æ–π

1. –ù–∞–∂–º–∏ **"Apply"** –∏–ª–∏ **"Manual Deploy"** ‚Üí **"Deploy latest commit"**
2. Render –Ω–∞—á–Ω–µ—Ç —Å–±–æ—Ä–∫—É Docker –æ–±—Ä–∞–∑–∞
3. –î–æ–∂–¥–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ 3-5 –º–∏–Ω—É—Ç)
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —É–≤–∏–¥–∏—à—å –∑–µ–ª—ë–Ω—ã–π —Å—Ç–∞—Ç—É—Å ‚úÖ

---

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 3.1 –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

URL –±—É–¥–µ—Ç –≤–∏–¥–∞: `https://url-shortener-xxxx.onrender.com`

### 3.2 –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—É—é —Å—Å—ã–ª–∫—É

**–ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
1. –û—Ç–∫—Ä–æ–π –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –í–≤–µ–¥–∏ –¥–ª–∏–Ω–Ω—ã–π URL
3. –ù–∞–∂–º–∏ "–°–æ–∫—Ä–∞—Ç–∏—Ç—å —Å—Å—ã–ª–∫—É"

**–ß–µ—Ä–µ–∑ API:**
```bash
curl -X POST https://url-shortener-xxxx.onrender.com/api/v1/urls \
  -H "Content-Type: application/json" \
  -d '{"original_url": "https://www.google.com"}'
```

### 3.3 –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–¥–∏—Ä–µ–∫—Ç

–û—Ç–∫—Ä–æ–π –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL.

---

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

Render –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ –≤–µ—Ç–∫–∏ `main`:

```bash
git add .
git commit -m "update feature"
git push origin main
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

1. –û—Ç–∫—Ä–æ–π Render Dashboard ‚Üí Web Service
2. –ù–∞–∂–º–∏ **"Manual Deploy"** ‚Üí **"Deploy latest commit"**

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

**Render Dashboard:**
- –û—Ç–∫—Ä–æ–π Web Service ‚Üí **Logs**
- –ú–æ–∂–µ—à—å —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ç–µ–∫—Å—Ç—É

### –ú–µ—Ç—Ä–∏–∫–∏

**Render Dashboard:**
- –û—Ç–∫—Ä–æ–π Web Service ‚Üí **Metrics**
- CPU, Memory, Request Rate

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**Neon Dashboard:**
- –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç ‚Üí **Monitoring**
- Queries, Connections, Storage

---

## üêõ Troubleshooting

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
```
Render Dashboard ‚Üí Web Service ‚Üí Logs
```

**2. –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:**

**–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL:**
```
–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL: connection refused
```
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `POSTGRES_HOST`, `POSTGRES_PASSWORD` –≤ Environment

**–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis:**
```
Error connecting to Redis
```
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Å—å —á—Ç–æ Redis —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω (Render Dashboard)

**–ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç:**
```
bind: address already in use
```
‚úÖ **–†–µ—à–µ–Ω–∏–µ:** Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–∞—ë—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PORT`, —É–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `SERVER_PORT=8080`

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞—Å—ã–ø–∞–µ—Ç

**–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω Render:**
- –ó–∞—Å—ã–ø–∞–µ—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç ~30 —Å–µ–∫—É–Ω–¥
- –ß—Ç–æ–±—ã "—Ä–∞–∑–±—É–¥–∏—Ç—å" - –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ (–ø–ª–∞—Ç–Ω–æ–µ):**
- –ê–ø–≥—Ä–µ–π–¥ –¥–æ Starter Plan ($7/–º–µ—Å—è—Ü) - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –∑–∞—Å—ã–ø–∞—Ç—å

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å

**–û—à–∏–±–∫–∞:**
```
relation "urls" does not exist
```

‚úÖ **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Neon SQL Editor –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
migrate -path ./migrations -database "postgresql://..." up
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

**–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–æ:**
- ‚úÖ Render Web Service - 750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- ‚úÖ Render Redis - 512 MB (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- ‚úÖ Neon PostgreSQL - 512 MB, 3 GB —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞–≤—Å–µ–≥–¥–∞)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞:**
- Web Service –∑–∞—Å—ã–ø–∞–µ—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- 750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü (~31 –¥–µ–Ω—å)
- –ù–µ—Ç –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ (—Ç–æ–ª—å–∫–æ *.onrender.com)

**–ê–ø–≥—Ä–µ–π–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- Starter Plan - $7/–º–µ—Å—è—Ü (–Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç, –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–í–∞–∂–Ω–æ:**
- ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å `.env` —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π Environment Variables –≤ Render Dashboard
- ‚úÖ Neon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–æ—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª–∏

### SSL/TLS

- ‚úÖ Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞—ë—Ç Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- ‚úÖ HTTPS –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ Neon —Ç—Ä–µ–±—É–µ—Ç SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (`sslmode=require`)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω

**–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:**
- –¢–æ–ª—å–∫–æ `*.onrender.com` –¥–æ–º–µ–Ω—ã

**Starter Plan ($7/–º–µ—Å):**
1. Render Dashboard ‚Üí Web Service ‚Üí Settings
2. Custom Domain ‚Üí Add Custom Domain
3. –£–∫–∞–∂–∏ —Å–≤–æ–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `short.yourdomain.com`)
4. –î–æ–±–∞–≤—å CNAME –∑–∞–ø–∏—Å—å –≤ DNS:
   ```
   short.yourdomain.com ‚Üí your-service.onrender.com
   ```

### –ë—ç–∫–∞–ø—ã PostgreSQL

**Neon –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –°–æ–∑–¥–∞—ë—Ç —Å–Ω—ç–ø—à–æ—Ç—ã –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- –•—Ä–∞–Ω–∏—Ç 7 –¥–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–∏ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω)
- –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –ª—é–±—É—é —Ç–æ—á–∫—É –≤—Ä–µ–º–µ–Ω–∏

**–†—É—á–Ω–æ–π –±—ç–∫–∞–ø:**
```bash
pg_dump -h ep-xxx.us-east-2.aws.neon.tech -U username -d neondb > backup.sql
```

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**Render:**
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://render.com/docs)
- [Community Forum](https://community.render.com)

**Neon:**
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://neon.tech/docs)
- [Discord](https://discord.gg/neon)

**–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º:**
- [GitHub Issues](https://github.com/alekarah/url-shortener-go/issues)
